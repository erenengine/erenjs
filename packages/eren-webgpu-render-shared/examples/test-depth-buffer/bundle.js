(()=>{"use strict";var e,t,r,n,o={20:(e,t,r)=>{r.d(t,{O:()=>h});const n={arrayStride:24,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float32x3"},{shaderLocation:1,offset:12,format:"float32x3"}]};var o,a=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array;function u(e,t,r){var n=new i(3);return n[0]=e,n[1]=t,n[2]=r,n}function s(){var e=new i(16);return i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),o=new i(3),i!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0);const c={r:.1921,g:.302,b:.4745,a:1},f=[{pos:u(-.5,-.5,0),color:u(1,0,0)},{pos:u(.5,-.5,0),color:u(0,1,0)},{pos:u(.5,.5,0),color:u(0,0,1)},{pos:u(-.5,.5,0),color:u(1,1,1)},{pos:u(-.5,-.5,-.5),color:u(1,0,0)},{pos:u(.5,-.5,-.5),color:u(0,1,0)},{pos:u(.5,.5,-.5),color:u(0,0,1)},{pos:u(-.5,.5,-.5),color:u(1,1,1)}],p=[0,1,2,2,3,0,4,5,6,6,7,4];class d{#e;#t;#r;#n;#o;#a;#i;constructor(e,t,r,o){this.#e=e;const a=e.createShaderModule({label:"Test Shader",code:"// uniform buffer 정의 (binding 0, group 0)\nstruct Uniforms {\n    model : mat4x4<f32>,\n    view  : mat4x4<f32>,\n    proj  : mat4x4<f32>,\n};\n\n@group(0) @binding(0)\nvar<uniform> ubo : Uniforms;\n\n// 정점 입력 구조체 (vertex buffer layout에서 제공)\nstruct VertexInput {\n    @location(0) inPosition : vec3<f32>,\n    @location(1) inColor    : vec3<f32>,\n};\n\n// 정점 출력 구조체\nstruct VertexOutput {\n    @builtin(position) position : vec4<f32>,\n    @location(0) fragColor : vec3<f32>,\n};\n\n@vertex\nfn vs_main(input : VertexInput) -> VertexOutput {\n    var output : VertexOutput;\n    \n    // GLSL과 동일한 방식의 모델-뷰-프로젝션 변환\n    let pos = vec4<f32>(input.inPosition, 1.0);\n    output.position = ubo.proj * ubo.view * ubo.model * pos;\n    \n    output.fragColor = input.inColor;\n    return output;\n}\n\n@fragment\nfn fs_main(@location(0) fragColor : vec3<f32>) -> @location(0) vec4<f32> {\n    return vec4<f32>(fragColor, 1.0);\n}\n"});this.#o=e.createBuffer({label:"UBO Buffer",size:192,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});const i=e.createBindGroupLayout({label:"UBO Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}}]});this.#a=e.createBindGroup({label:"UBO Bind Group",layout:i,entries:[{binding:0,resource:{buffer:this.#o}}]});const u=e.createPipelineLayout({label:"Test Pipeline Layout",bindGroupLayouts:[i]});this.#t=e.createRenderPipeline({label:"Test Pipeline",layout:u,vertex:{module:a,entryPoint:"vs_main",buffers:[n]},fragment:{module:a,entryPoint:"fs_main",targets:[{format:t}]},primitive:{cullMode:"back",frontFace:"ccw",topology:"triangle-list"},depthStencil:{format:"depth24plus",depthWriteEnabled:!0,depthCompare:"less"}}),this.#r=this.#u(r,o),this.#n=function(e){const t=function(e){const t=new Float32Array(6*e.length);for(let r=0;r<e.length;r++){const n=6*r;t.set(e[r].pos,n+0),t.set(e[r].color,n+3)}return t}(f),r=t.length,n=p.length,o=4*r+3&-4,a=o+2*n,i=e.createBuffer({label:"Test Buffer",size:a,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0}),u=new Uint8Array(i.getMappedRange());return new Float32Array(u.buffer).set(t),new Uint16Array(u.buffer,o,n).set(p),i.unmap(),{buffer:i,vertexOffset:0,indexOffset:o,indexCount:n}}(e),this.#i=Date.now()}#u(e,t){return this.#e.createTexture({label:"Depth Texture",size:{width:e,height:t},format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}).createView()}resizeDepthTexture(e,t){this.#r=this.#u(e,t)}#s(e,t){const r=(performance.now()-this.#i)/1e3,n={model:s(),view:s(),proj:s()};!function(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(n.model,-90*r*Math.PI/180);const o=u(2,2,2),i=u(0,0,0),c=u(0,0,1);!function(e,t,r,n){var o,i,u,s,c,f,p,d,h,l,m=t[0],v=t[1],b=t[2],w=n[0],g=n[1],y=n[2],x=r[0],B=r[1],P=r[2];Math.abs(m-x)<a&&Math.abs(v-B)<a&&Math.abs(b-P)<a?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(p=m-x,d=v-B,h=b-P,o=g*(h*=l=1/Math.hypot(p,d,h))-y*(d*=l),i=y*(p*=l)-w*h,u=w*d-g*p,(l=Math.hypot(o,i,u))?(o*=l=1/l,i*=l,u*=l):(o=0,i=0,u=0),s=d*u-h*i,c=h*o-p*u,f=p*i-d*o,(l=Math.hypot(s,c,f))?(s*=l=1/l,c*=l,f*=l):(s=0,c=0,f=0),e[0]=o,e[1]=s,e[2]=p,e[3]=0,e[4]=i,e[5]=c,e[6]=d,e[7]=0,e[8]=u,e[9]=f,e[10]=h,e[11]=0,e[12]=-(o*m+i*v+u*b),e[13]=-(s*m+c*v+f*b),e[14]=-(p*m+d*v+h*b),e[15]=1)}(n.view,o,i,c);const f=e/t;(function(e,t,r,n,o){var a,i=1/Math.tan(t/2);e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(a=1/(n-o),e[10]=(o+n)*a,e[14]=2*o*n*a):(e[10]=-1,e[14]=-2*n)})(n.proj,Math.PI/4,f,.1,10),this.#e.queue.writeBuffer(this.#o,0,function(e){const t=new Float32Array(48);return t.set(e.model,0),t.set(e.view,16),t.set(e.proj,32),t}(n))}recordCommands(e,t,r,n){const o=e.beginRenderPass({colorAttachments:[{view:t,loadOp:"clear",storeOp:"store",clearValue:c}],depthStencilAttachment:{view:this.#r,depthLoadOp:"clear",depthStoreOp:"store",depthClearValue:1}});o.setPipeline(this.#t),o.setVertexBuffer(0,this.#n.buffer,this.#n.vertexOffset),o.setIndexBuffer(this.#n.buffer,"uint16",this.#n.indexOffset),this.#s(r,n),o.setBindGroup(0,this.#a),o.drawIndexed(this.#n.indexCount,1,0,0,0),o.end()}}class h{#e;#c;constructor(e,t,r,n){this.#e=e,this.#c=new d(e,t,r,n)}resize(e,t){this.#c.resizeDepthTexture(e,t)}render(e,t,r){const n=this.#e.createCommandEncoder({label:"Test Render Encoder"});this.#c.recordCommands(n,e,t,r),this.#e.queue.submit([n.finish()])}}},219:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(543),o=r(453),a=r(797),i=r(562),u=r(20);const s=document.getElementById("canvas"),c=new n.c,f=await o.Y.create(c),p=new a.o(s),d=await i.p.create(f,p,c.preferredFormat),h=new u.O(d,c.preferredFormat,s.width,s.height);function l(){h.render(p.getCurrentTexture().createView(),s.width,s.height),requestAnimationFrame(l)}l(),t()}catch(m){t(m)}},1)},453:(e,t,r)=>{r.d(t,{Y:()=>n});class n{#f;constructor(e){this.#f=e}static async create(e){const t=await e.requestAdapter();return new n(t)}requestDevice(){return this.#f.requestDevice()}}},543:(e,t,r)=>{r.d(t,{c:()=>n});class n{#p;preferredFormat;constructor(){if(!navigator.gpu)throw new Error("WebGPU support is not available");this.#p=navigator.gpu,this.preferredFormat=navigator.gpu.getPreferredCanvasFormat()}async requestAdapter(){const e=await this.#p.requestAdapter({powerPreference:"high-performance",forceFallbackAdapter:!1});if(!e)throw new Error("Failed to request Adapter.");return e}}},562:(e,t,r)=>{r.d(t,{p:()=>n});class n{#e;queue;constructor(e,t){this.#e=e,this.queue=t}static async create(e,t,r){const o=await e.requestDevice();return t.configure({device:o,format:r,alphaMode:"opaque"}),new n(o,o.queue)}createShaderModule(e){return this.#e.createShaderModule(e)}createPipelineLayout(e){return this.#e.createPipelineLayout(e)}createComputePipeline(e){return this.#e.createComputePipeline(e)}createRenderPipeline(e){return this.#e.createRenderPipeline(e)}createCommandEncoder(e){return this.#e.createCommandEncoder(e)}createBuffer(e){return this.#e.createBuffer(e)}createBindGroupLayout(e){return this.#e.createBindGroupLayout(e)}createBindGroup(e){return this.#e.createBindGroup(e)}createTexture(e){return this.#e.createTexture(e)}createSampler(e){return this.#e.createSampler(e)}}},797:(e,t,r)=>{r.d(t,{o:()=>n});class n{#d;constructor(e){const t=e.getContext("webgpu");if(!t)throw new Error("Failed to get WebGPU context");this.#d=t}configure(e){this.#d.configure(e)}getCurrentTexture(){return this.#d.getCurrentTexture()}}}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,i),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},i.a=(o,a,i)=>{var u;i&&((u=[]).d=-1);var s,c,f,p=new Set,d=o.exports,h=new Promise((e,t)=>{f=t,c=e});h[t]=d,h[e]=e=>(u&&e(u),p.forEach(e),h.catch(e=>{})),o.exports=h,a(o=>{var a;s=(o=>o.map(o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var a=[];a.d=0,o.then(e=>{i[t]=e,n(a)},e=>{i[r]=e,n(a)});var i={};return i[e]=e=>e(a),i}}var u={};return u[e]=e=>{},u[t]=o,u}))(o);var i=()=>s.map(e=>{if(e[r])throw e[r];return e[t]}),c=new Promise(t=>{(a=()=>t(i)).r=0;var r=e=>e!==u&&!p.has(e)&&(p.add(e),e&&!e.d&&(a.r++,e.push(a)));s.map(t=>t[e](r))});return a.r?c:i()},e=>(e?f(h[r]=e):c(d),n(u))),u&&u.d<0&&(u.d=0)},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(219)})();