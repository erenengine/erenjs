(()=>{"use strict";var e,t,r,o,n={240:(e,t,r)=>{r.d(t,{O:()=>h});const o={arrayStride:32,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float32x3"},{shaderLocation:1,offset:12,format:"float32x3"},{shaderLocation:2,offset:24,format:"float32x2"}]};var n,a=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array;function s(e,t,r){var o=new i(3);return o[0]=e,o[1]=t,o[2]=r,o}function u(e,t){var r=new i(2);return r[0]=e,r[1]=t,r}function c(){var e=new i(16);return i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),n=new i(3),i!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),function(){var e=new i(2);i!=Float32Array&&(e[0]=0,e[1]=0)}();const d={r:.1921,g:.302,b:.4745,a:1},f=[{pos:s(-.5,-.5,0),color:s(1,0,0),tex_coords:u(0,0)},{pos:s(.5,-.5,0),color:s(0,1,0),tex_coords:u(1,0)},{pos:s(.5,.5,0),color:s(0,0,1),tex_coords:u(1,1)},{pos:s(-.5,.5,0),color:s(1,1,1),tex_coords:u(0,1)},{pos:s(-.5,-.5,-.5),color:s(1,0,0),tex_coords:u(0,0)},{pos:s(.5,-.5,-.5),color:s(0,1,0),tex_coords:u(1,0)},{pos:s(.5,.5,-.5),color:s(0,0,1),tex_coords:u(1,1)},{pos:s(-.5,.5,-.5),color:s(1,1,1),tex_coords:u(0,1)}],p=[0,1,2,2,3,0,4,5,6,6,7,4];class l{#e;#t;#r;#o;#n;#a;#i;constructor(e,t,r,n,a){const i=e.createTexture({label:"Test Texture",size:{width:a.width,height:a.height},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT});e.queue.copyExternalImageToTexture({source:a},{texture:i},{width:a.width,height:a.height});const s=i.createView(),u=e.createSampler({addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",magFilter:"linear",minFilter:"linear"});this.#e=e;const c=e.createShaderModule({label:"Test Shader",code:"// uniform buffer 정의 (binding 0, group 0)\nstruct Uniforms {\n    model : mat4x4<f32>,\n    view  : mat4x4<f32>,\n    proj  : mat4x4<f32>,\n};\n\n@group(0) @binding(0)\nvar<uniform> ubo : Uniforms;\n\n// 정점 입력 구조체 (vertex buffer layout에서 제공)\nstruct VertexInput {\n    @location(0) inPosition : vec3<f32>,\n    @location(1) inColor    : vec3<f32>,\n    @location(2) inTexCoord : vec2<f32>,\n};\n\n// 정점 출력 구조체\nstruct VertexOutput {\n    @builtin(position) position : vec4<f32>,\n    @location(0) fragColor : vec3<f32>,\n    @location(1) fragTexCoord : vec2<f32>,\n};\n\n@vertex\nfn vs_main(input : VertexInput) -> VertexOutput {\n    var output : VertexOutput;\n    \n    // GLSL과 동일한 방식의 모델-뷰-프로젝션 변환\n    let pos = vec4<f32>(input.inPosition, 1.0);\n    output.position = ubo.proj * ubo.view * ubo.model * pos;\n    \n    output.fragColor = input.inColor;\n    output.fragTexCoord = input.inTexCoord;\n    return output;\n}\n\n\n@group(0) @binding(1)\nvar tex : texture_2d<f32>;\n@group(0) @binding(2)\nvar texSampler : sampler;\n\n@fragment\nfn fs_main(\n    @location(0) fragColor : vec3<f32>,\n    @location(1) fragTexCoord : vec2<f32>\n) -> @location(0) vec4<f32> {\n    let texColor = textureSample(tex, texSampler, fragTexCoord);\n    return texColor;\n}\n"});this.#n=e.createBuffer({label:"UBO Buffer",size:192,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});const d=e.createBindGroupLayout({label:"UBO Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}}]});this.#a=e.createBindGroup({label:"UBO Bind Group",layout:d,entries:[{binding:0,resource:{buffer:this.#n}},{binding:1,resource:s},{binding:2,resource:u}]});const l=e.createPipelineLayout({label:"Test Pipeline Layout",bindGroupLayouts:[d]});this.#t=e.createRenderPipeline({label:"Test Pipeline",layout:l,vertex:{module:c,entryPoint:"vs_main",buffers:[o]},fragment:{module:c,entryPoint:"fs_main",targets:[{format:t}]},primitive:{cullMode:"back",frontFace:"ccw",topology:"triangle-list"},depthStencil:{format:"depth24plus",depthWriteEnabled:!0,depthCompare:"less"}}),this.#r=this.#s(r,n),this.#o=function(e){const t=function(e){const t=new Float32Array(8*e.length);for(let r=0;r<e.length;r++){const o=8*r;t.set(e[r].pos,o+0),t.set(e[r].color,o+3),t.set(e[r].tex_coords,o+6)}return t}(f),r=t.length,o=p.length,n=4*r+3&-4,a=n+2*o,i=e.createBuffer({label:"Test Buffer",size:a,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0}),s=new Uint8Array(i.getMappedRange());return new Float32Array(s.buffer).set(t),new Uint16Array(s.buffer,n,o).set(p),i.unmap(),{buffer:i,vertexOffset:0,indexOffset:n,indexCount:o}}(e),this.#i=Date.now()}#s(e,t){return this.#e.createTexture({label:"Depth Texture",size:{width:e,height:t},format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}).createView()}resizeDepthTexture(e,t){this.#r=this.#s(e,t)}#u(e,t){const r=(performance.now()-this.#i)/1e3,o={model:c(),view:c(),proj:c()};!function(e,t){var r=Math.sin(t),o=Math.cos(t);e[0]=o,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(o.model,-90*r*Math.PI/180);const n=s(2,2,2),i=s(0,0,0),u=s(0,0,1);!function(e,t,r,o){var n,i,s,u,c,d,f,p,l,h,m=t[0],g=t[1],b=t[2],v=o[0],x=o[1],w=o[2],y=r[0],T=r[1],P=r[2];Math.abs(m-y)<a&&Math.abs(g-T)<a&&Math.abs(b-P)<a?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(f=m-y,p=g-T,l=b-P,n=x*(l*=h=1/Math.hypot(f,p,l))-w*(p*=h),i=w*(f*=h)-v*l,s=v*p-x*f,(h=Math.hypot(n,i,s))?(n*=h=1/h,i*=h,s*=h):(n=0,i=0,s=0),u=p*s-l*i,c=l*n-f*s,d=f*i-p*n,(h=Math.hypot(u,c,d))?(u*=h=1/h,c*=h,d*=h):(u=0,c=0,d=0),e[0]=n,e[1]=u,e[2]=f,e[3]=0,e[4]=i,e[5]=c,e[6]=p,e[7]=0,e[8]=s,e[9]=d,e[10]=l,e[11]=0,e[12]=-(n*m+i*g+s*b),e[13]=-(u*m+c*g+d*b),e[14]=-(f*m+p*g+l*b),e[15]=1)}(o.view,n,i,u);const d=e/t;(function(e,t,r,o,n){var a,i=1/Math.tan(t/2);e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(a=1/(o-n),e[10]=(n+o)*a,e[14]=2*n*o*a):(e[10]=-1,e[14]=-2*o)})(o.proj,Math.PI/4,d,.1,10),this.#e.queue.writeBuffer(this.#n,0,function(e){const t=new Float32Array(48);return t.set(e.model,0),t.set(e.view,16),t.set(e.proj,32),t}(o))}recordCommands(e,t,r,o){const n=e.beginRenderPass({colorAttachments:[{view:t,loadOp:"clear",storeOp:"store",clearValue:d}],depthStencilAttachment:{view:this.#r,depthLoadOp:"clear",depthStoreOp:"store",depthClearValue:1}});n.setPipeline(this.#t),n.setVertexBuffer(0,this.#o.buffer,this.#o.vertexOffset),n.setIndexBuffer(this.#o.buffer,"uint16",this.#o.indexOffset),this.#u(r,o),n.setBindGroup(0,this.#a),n.drawIndexed(this.#o.indexCount,1,0,0,0),n.end()}}class h{#e;#c;constructor(e,t,r,o,n){this.#e=e,this.#c=new l(e,t,r,o,n)}resize(e,t){this.#c.resizeDepthTexture(e,t)}render(e,t,r){const o=this.#e.createCommandEncoder({label:"Test Render Encoder"});this.#c.recordCommands(o,e,t,r),this.#e.queue.submit([o.finish()])}}},453:(e,t,r)=>{r.d(t,{Y:()=>o});class o{#d;constructor(e){this.#d=e}static async create(e){const t=await e.requestAdapter();return new o(t)}requestDevice(){return this.#d.requestDevice()}}},543:(e,t,r)=>{r.d(t,{c:()=>o});class o{#f;preferredFormat;constructor(){if(!navigator.gpu)throw new Error("WebGPU support is not available");this.#f=navigator.gpu,this.preferredFormat=navigator.gpu.getPreferredCanvasFormat()}async requestAdapter(){const e=await this.#f.requestAdapter({powerPreference:"high-performance",forceFallbackAdapter:!1});if(!e)throw new Error("Failed to request Adapter.");return e}}},562:(e,t,r)=>{r.d(t,{p:()=>o});class o{#e;queue;constructor(e,t){this.#e=e,this.queue=t}static async create(e,t,r){const n=await e.requestDevice();return t.configure({device:n,format:r,alphaMode:"opaque"}),new o(n,n.queue)}createShaderModule(e){return this.#e.createShaderModule(e)}createPipelineLayout(e){return this.#e.createPipelineLayout(e)}createComputePipeline(e){return this.#e.createComputePipeline(e)}createRenderPipeline(e){return this.#e.createRenderPipeline(e)}createCommandEncoder(e){return this.#e.createCommandEncoder(e)}createBuffer(e){return this.#e.createBuffer(e)}createBindGroupLayout(e){return this.#e.createBindGroupLayout(e)}createBindGroup(e){return this.#e.createBindGroup(e)}createTexture(e){return this.#e.createTexture(e)}createSampler(e){return this.#e.createSampler(e)}}},672:(e,t,r)=>{r.a(e,async(e,t)=>{try{var o=r(543),n=r(453),a=r(797),i=r(562),s=r(240);const u=document.getElementById("canvas"),c=new o.c,d=await n.Y.create(c),f=new a.o(u),p=await i.p.create(d,f,c.preferredFormat),l=await fetch("./assets/logo.jpg"),h=await l.blob(),m=await createImageBitmap(h),g=new s.O(p,c.preferredFormat,u.width,u.height,m);function b(){g.render(f.getCurrentTexture().createView(),u.width,u.height),requestAnimationFrame(b)}b(),t()}catch(v){t(v)}},1)},797:(e,t,r)=>{r.d(t,{o:()=>o});class o{#p;constructor(e){const t=e.getContext("webgpu");if(!t)throw new Error("Failed to get WebGPU context");this.#p=t}configure(e){this.#p.configure(e)}getCurrentTexture(){return this.#p.getCurrentTexture()}}}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return n[e](r,r.exports,i),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},i.a=(n,a,i)=>{var s;i&&((s=[]).d=-1);var u,c,d,f=new Set,p=n.exports,l=new Promise((e,t)=>{d=t,c=e});l[t]=p,l[e]=e=>(s&&e(s),f.forEach(e),l.catch(e=>{})),n.exports=l,a(n=>{var a;u=(n=>n.map(n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var a=[];a.d=0,n.then(e=>{i[t]=e,o(a)},e=>{i[r]=e,o(a)});var i={};return i[e]=e=>e(a),i}}var s={};return s[e]=e=>{},s[t]=n,s}))(n);var i=()=>u.map(e=>{if(e[r])throw e[r];return e[t]}),c=new Promise(t=>{(a=()=>t(i)).r=0;var r=e=>e!==s&&!f.has(e)&&(f.add(e),e&&!e.d&&(a.r++,e.push(a)));u.map(t=>t[e](r))});return a.r?c:i()},e=>(e?d(l[r]=e):c(p),o(s))),s&&s.d<0&&(s.d=0)},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(672)})();