(()=>{"use strict";const r=WebGL2RenderingContext.ARRAY_BUFFER,e=WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER,t=WebGL2RenderingContext.STATIC_DRAW,n=WebGL2RenderingContext.FLOAT;WebGL2RenderingContext.LESS;class a{#r;#e;constructor(r,e,t){this.#r=r,this.#e=this.#r.createProgram(e,t)}use(){this.#r.useProgram(this.#e)}getUniformLocation(r){return this.#r.getUniformLocation(this.#e,r)}}var o,i="undefined"!=typeof Float32Array?Float32Array:Array;function s(r,e){var t=new i(2);return t[0]=r,t[1]=e,t}function l(r,e,t){var n=new i(3);return n[0]=r,n[1]=e,n[2]=t,n}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)}),o=new i(2),i!=Float32Array&&(o[0]=0,o[1]=0),function(){var r=new i(3);i!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0)}();const h={r:.1921,g:.302,b:.4745,a:1},g=[{pos:s(-.5,-.5),color:l(1,0,0)},{pos:s(.5,-.5),color:l(0,1,0)},{pos:s(.5,.5),color:l(0,0,1)},{pos:s(-.5,.5),color:l(1,1,1)}],c=[0,1,2,2,3,0];class d{#r;#e;#t;constructor(o){this.#r=o,this.#e=new a(o,"#version 300 es\nprecision mediump float;\n\nin vec2 aPosition;\nin vec3 aColor;\n\nout vec3 vColor;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vColor = aColor;\n}\n","#version 300 es\nprecision mediump float;\n\nin  vec3 vColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = vec4(vColor, 1.0);\n}\n"),this.#t=o.createVertexArray(),o.bindVertexArray(this.#t);const i=o.createBuffer();o.bindBuffer(r,i),o.bufferData(r,function(r){const e=new Float32Array(5*r.length);for(let t=0;t<r.length;t++){const n=5*t;e.set(r[t].pos,n+0),e.set(r[t].color,n+2)}return e}(g),t);const s=o.createBuffer();o.bindBuffer(e,s),o.bufferData(e,new Uint16Array(c),t),o.enableVertexAttribArray(0),o.vertexAttribPointer(0,2,n,!1,20,0),o.enableVertexAttribArray(1),o.vertexAttribPointer(1,3,n,!1,20,8)}recordCommands(){this.#r.clear(h),this.#e.use(),this.#r.bindVertexArray(this.#t),this.#r.drawIndexed(c.length,1)}}const u=document.getElementById("canvas"),f=new class{#r;constructor(r){this.#r=r}#n(r,e){const t=this.#r.createShader(e);if(!t)throw new Error("Failed to create shader");if(this.#r.shaderSource(t,r),this.#r.compileShader(t),!this.#r.getShaderParameter(t,this.#r.COMPILE_STATUS)){const r=this.#r.getShaderInfoLog(t);throw this.#r.deleteShader(t),new Error("Failed to compile shader: "+r)}return t}createProgram(r,e){const t=this.#n(r,this.#r.VERTEX_SHADER),n=this.#n(e,this.#r.FRAGMENT_SHADER),a=this.#r.createProgram();if(this.#r.attachShader(a,t),this.#r.attachShader(a,n),this.#r.linkProgram(a),!this.#r.getProgramParameter(a,this.#r.LINK_STATUS)){const r=this.#r.getProgramInfoLog(a);throw this.#r.deleteProgram(a),new Error("Failed to link program: "+r)}return a}useProgram(r){this.#r.useProgram(r)}createVertexArray(){return this.#r.createVertexArray()}bindVertexArray(r){this.#r.bindVertexArray(r)}createBuffer(){return this.#r.createBuffer()}bindBuffer(r,e){this.#r.bindBuffer(r,e)}bufferData(r,e,t){this.#r.bufferData(r,e,t)}enableVertexAttribArray(r){this.#r.enableVertexAttribArray(r)}vertexAttribPointer(r,e,t,n,a,o){this.#r.vertexAttribPointer(r,e,t,n,a,o)}uniformMatrix4fv(r,e,t){this.#r.uniformMatrix4fv(r,e,t)}getUniformLocation(r,e){return this.#r.getUniformLocation(r,e)}clear(r){this.#r.clearColor(r.r,r.g,r.b,r.a),this.#r.clear(this.#r.COLOR_BUFFER_BIT)}draw(r,e){this.#r.drawArraysInstanced(this.#r.TRIANGLES,0,r,e)}drawElements(r){this.#r.drawElements(this.#r.TRIANGLES,r,this.#r.UNSIGNED_SHORT,0)}drawIndexed(r,e){this.#r.drawElementsInstanced(this.#r.TRIANGLE_STRIP,r,this.#r.UNSIGNED_SHORT,0,e)}enableDepthTest(){this.#r.enable(this.#r.DEPTH_TEST)}disableDepthTest(){this.#r.disable(this.#r.DEPTH_TEST)}depthFunc(r){this.#r.depthFunc(r)}clearDepth(r){this.#r.clearDepth(r)}}(u.getContext("webgl2")),m=new class{#a;constructor(r){this.#a=new d(r)}render(){this.#a.recordCommands()}}(f);!function r(){m.render(),requestAnimationFrame(r)}()})();