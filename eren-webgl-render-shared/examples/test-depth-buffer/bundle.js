(()=>{"use strict";const t=WebGL2RenderingContext.ARRAY_BUFFER,r=WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER,e=WebGL2RenderingContext.STATIC_DRAW,o=WebGL2RenderingContext.FLOAT,i=WebGL2RenderingContext.LESS;class n{#t;#r;constructor(t,r,e){this.#t=t,this.#r=this.#t.createProgram(r,e)}use(){this.#t.useProgram(this.#r)}getUniformLocation(t){return this.#t.getUniformLocation(this.#r,t)}}var a,s=1e-6,l="undefined"!=typeof Float32Array?Float32Array:Array;function h(t,r,e){var o=new l(3);return o[0]=t,o[1]=r,o[2]=e,o}function g(){var t=new l(16);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)}),a=new l(3),l!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0);const c={r:.1921,g:.302,b:.4745,a:1},u=[{pos:h(-.5,-.5,0),color:h(1,0,0)},{pos:h(.5,-.5,0),color:h(0,1,0)},{pos:h(.5,.5,0),color:h(0,0,1)},{pos:h(-.5,.5,0),color:h(1,1,1)},{pos:h(-.5,-.5,-.5),color:h(1,0,0)},{pos:h(.5,-.5,-.5),color:h(0,1,0)},{pos:h(.5,.5,-.5),color:h(0,0,1)},{pos:h(-.5,.5,-.5),color:h(1,1,1)}],d=[0,1,2,2,3,0,4,5,6,6,7,4];class m{#t;#r;#e;#o;#i;#n;#a;constructor(a){this.#t=a,this.#r=new n(a,"#version 300 es\nprecision mediump float;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProj;\n\nin vec3 aPosition;\nin vec3 aColor;\n\nout vec3 vColor;\n\nvoid main() {\n    gl_Position = uProj * uView * uModel * vec4(aPosition, 1.0);\n    vColor = aColor;\n}\n","#version 300 es\nprecision mediump float;\n\nin  vec3 vColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = vec4(vColor, 1.0);\n}\n"),a.enableDepthTest(),a.depthFunc(i),a.clearDepth(1),this.#e=a.createVertexArray(),a.bindVertexArray(this.#e);const s=a.createBuffer();a.bindBuffer(t,s),a.bufferData(t,function(t){const r=new Float32Array(6*t.length);for(let e=0;e<t.length;e++){const o=6*e;r.set(t[e].pos,o+0),r.set(t[e].color,o+3)}return r}(u),e);const l=a.createBuffer();a.bindBuffer(r,l),a.bufferData(r,new Uint16Array(d),e),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,3,o,!1,24,0),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,3,o,!1,24,12);let h=this.#r.getUniformLocation("uModel"),g=this.#r.getUniformLocation("uView"),c=this.#r.getUniformLocation("uProj");if(!h)throw new Error("Failed to get uniform location (uModel)");if(!g)throw new Error("Failed to get uniform location (uView)");if(!c)throw new Error("Failed to get uniform location (uProj)");this.#o=h,this.#i=g,this.#n=c,this.#a=Date.now()}#s(t,r){const e=(performance.now()-this.#a)/1e3,o={model:g(),view:g(),proj:g()};!function(t,r){var e=Math.sin(r),o=Math.cos(r);t[0]=o,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(o.model,-90*e*Math.PI/180);const i=h(2,2,2),n=h(0,0,0),a=h(0,0,1);!function(t,r,e,o){var i,n,a,l,h,g,c,u,d,m,f=r[0],p=r[1],A=r[2],w=o[0],b=o[1],v=o[2],P=e[0],E=e[1],L=e[2];Math.abs(f-P)<s&&Math.abs(p-E)<s&&Math.abs(A-L)<s?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(c=f-P,u=p-E,d=A-L,i=b*(d*=m=1/Math.hypot(c,u,d))-v*(u*=m),n=v*(c*=m)-w*d,a=w*u-b*c,(m=Math.hypot(i,n,a))?(i*=m=1/m,n*=m,a*=m):(i=0,n=0,a=0),l=u*a-d*n,h=d*i-c*a,g=c*n-u*i,(m=Math.hypot(l,h,g))?(l*=m=1/m,h*=m,g*=m):(l=0,h=0,g=0),t[0]=i,t[1]=l,t[2]=c,t[3]=0,t[4]=n,t[5]=h,t[6]=u,t[7]=0,t[8]=a,t[9]=g,t[10]=d,t[11]=0,t[12]=-(i*f+n*p+a*A),t[13]=-(l*f+h*p+g*A),t[14]=-(c*f+u*p+d*A),t[15]=1)}(o.view,i,n,a);const l=t/r;return function(t,r,e,o,i){var n,a=1/Math.tan(r/2);t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(n=1/(o-i),t[10]=(i+o)*n,t[14]=2*i*o*n):(t[10]=-1,t[14]=-2*o)}(o.proj,Math.PI/4,l,.1,10),o}recordCommands(t,r){this.#t.clear(c),this.#r.use(),this.#t.bindVertexArray(this.#e);const e=this.#s(t,r);this.#t.uniformMatrix4fv(this.#o,!1,e.model),this.#t.uniformMatrix4fv(this.#i,!1,e.view),this.#t.uniformMatrix4fv(this.#n,!1,e.proj),this.#t.drawElements(d.length)}}const f=document.getElementById("canvas"),p=new class{#t;constructor(t){this.#t=t}#l(t,r){const e=this.#t.createShader(r);if(!e)throw new Error("Failed to create shader");if(this.#t.shaderSource(e,t),this.#t.compileShader(e),!this.#t.getShaderParameter(e,this.#t.COMPILE_STATUS)){const t=this.#t.getShaderInfoLog(e);throw this.#t.deleteShader(e),new Error("Failed to compile shader: "+t)}return e}createProgram(t,r){const e=this.#l(t,this.#t.VERTEX_SHADER),o=this.#l(r,this.#t.FRAGMENT_SHADER),i=this.#t.createProgram();if(this.#t.attachShader(i,e),this.#t.attachShader(i,o),this.#t.linkProgram(i),!this.#t.getProgramParameter(i,this.#t.LINK_STATUS)){const t=this.#t.getProgramInfoLog(i);throw this.#t.deleteProgram(i),new Error("Failed to link program: "+t)}return i}useProgram(t){this.#t.useProgram(t)}createVertexArray(){return this.#t.createVertexArray()}bindVertexArray(t){this.#t.bindVertexArray(t)}createBuffer(){return this.#t.createBuffer()}bindBuffer(t,r){this.#t.bindBuffer(t,r)}bufferData(t,r,e){this.#t.bufferData(t,r,e)}enableVertexAttribArray(t){this.#t.enableVertexAttribArray(t)}vertexAttribPointer(t,r,e,o,i,n){this.#t.vertexAttribPointer(t,r,e,o,i,n)}uniformMatrix4fv(t,r,e){this.#t.uniformMatrix4fv(t,r,e)}getUniformLocation(t,r){return this.#t.getUniformLocation(t,r)}clear(t){this.#t.clearColor(t.r,t.g,t.b,t.a),this.#t.clear(this.#t.COLOR_BUFFER_BIT)}draw(t,r){this.#t.drawArraysInstanced(this.#t.TRIANGLES,0,t,r)}drawElements(t){this.#t.drawElements(this.#t.TRIANGLES,t,this.#t.UNSIGNED_SHORT,0)}drawIndexed(t,r){this.#t.drawElementsInstanced(this.#t.TRIANGLE_STRIP,t,this.#t.UNSIGNED_SHORT,0,r)}enableDepthTest(){this.#t.enable(this.#t.DEPTH_TEST)}disableDepthTest(){this.#t.disable(this.#t.DEPTH_TEST)}depthFunc(t){this.#t.depthFunc(t)}clearDepth(t){this.#t.clearDepth(t)}}(f.getContext("webgl2")),A=new class{#h;constructor(t){this.#h=new m(t)}render(t,r){this.#h.recordCommands(t,r)}}(p);!function t(){A.render(f.width,f.height),requestAnimationFrame(t)}()})();