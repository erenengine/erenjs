(()=>{"use strict";const t=WebGL2RenderingContext.ARRAY_BUFFER,r=WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER,e=WebGL2RenderingContext.STATIC_DRAW,o=WebGL2RenderingContext.FLOAT;WebGL2RenderingContext.LESS;class n{#t;#r;constructor(t,r,e){this.#t=t,this.#r=this.#t.createProgram(r,e)}use(){this.#t.useProgram(this.#r)}getUniformLocation(t){return this.#t.getUniformLocation(this.#r,t)}}var i,a=1e-6,s="undefined"!=typeof Float32Array?Float32Array:Array;function l(t,r){var e=new s(2);return e[0]=t,e[1]=r,e}function h(t,r,e){var o=new s(3);return o[0]=t,o[1]=r,o[2]=e,o}function g(){var t=new s(16);return s!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)}),i=new s(2),s!=Float32Array&&(i[0]=0,i[1]=0),function(){var t=new s(3);s!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0)}();const c={r:.1921,g:.302,b:.4745,a:1},u=[{pos:l(-.5,-.5),color:h(1,0,0)},{pos:l(.5,-.5),color:h(0,1,0)},{pos:l(.5,.5),color:h(0,0,1)},{pos:l(-.5,.5),color:h(1,1,1)}],d=[0,1,2,2,3,0];class f{#t;#r;#e;#o;#n;#i;#a;constructor(i){this.#t=i,this.#r=new n(i,"#version 300 es\nprecision mediump float;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProj;\n\nin vec2 aPosition;\nin vec3 aColor;\n\nout vec3 vColor;\n\nvoid main() {\n    gl_Position = uProj * uView * uModel * vec4(aPosition, 0.0, 1.0);\n    vColor = aColor;\n}\n","#version 300 es\nprecision mediump float;\n\nin  vec3 vColor;\nout vec4 outColor;\n\nvoid main() {\n    outColor = vec4(vColor, 1.0);\n}\n"),this.#e=i.createVertexArray(),i.bindVertexArray(this.#e);const a=i.createBuffer();i.bindBuffer(t,a),i.bufferData(t,function(t){const r=new Float32Array(5*t.length);for(let e=0;e<t.length;e++){const o=5*e;r.set(t[e].pos,o+0),r.set(t[e].color,o+2)}return r}(u),e);const s=i.createBuffer();i.bindBuffer(r,s),i.bufferData(r,new Uint16Array(d),e),i.enableVertexAttribArray(0),i.vertexAttribPointer(0,2,o,!1,20,0),i.enableVertexAttribArray(1),i.vertexAttribPointer(1,3,o,!1,20,8);let l=this.#r.getUniformLocation("uModel"),h=this.#r.getUniformLocation("uView"),g=this.#r.getUniformLocation("uProj");if(!l)throw new Error("Failed to get uniform location (uModel)");if(!h)throw new Error("Failed to get uniform location (uView)");if(!g)throw new Error("Failed to get uniform location (uProj)");this.#o=l,this.#n=h,this.#i=g,this.#a=Date.now()}#s(t,r){const e=(performance.now()-this.#a)/1e3,o={model:g(),view:g(),proj:g()};!function(t,r){var e=Math.sin(r),o=Math.cos(r);t[0]=o,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(o.model,-90*e*Math.PI/180);const n=h(2,2,2),i=h(0,0,0),s=h(0,0,1);!function(t,r,e,o){var n,i,s,l,h,g,c,u,d,f,m=r[0],w=r[1],A=r[2],v=o[0],b=o[1],p=o[2],P=e[0],E=e[1],L=e[2];Math.abs(m-P)<a&&Math.abs(w-E)<a&&Math.abs(A-L)<a?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(c=m-P,u=w-E,d=A-L,n=b*(d*=f=1/Math.hypot(c,u,d))-p*(u*=f),i=p*(c*=f)-v*d,s=v*u-b*c,(f=Math.hypot(n,i,s))?(n*=f=1/f,i*=f,s*=f):(n=0,i=0,s=0),l=u*s-d*i,h=d*n-c*s,g=c*i-u*n,(f=Math.hypot(l,h,g))?(l*=f=1/f,h*=f,g*=f):(l=0,h=0,g=0),t[0]=n,t[1]=l,t[2]=c,t[3]=0,t[4]=i,t[5]=h,t[6]=u,t[7]=0,t[8]=s,t[9]=g,t[10]=d,t[11]=0,t[12]=-(n*m+i*w+s*A),t[13]=-(l*m+h*w+g*A),t[14]=-(c*m+u*w+d*A),t[15]=1)}(o.view,n,i,s);const l=t/r;return function(t,r,e,o,n){var i,a=1/Math.tan(r/2);t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(i=1/(o-n),t[10]=(n+o)*i,t[14]=2*n*o*i):(t[10]=-1,t[14]=-2*o)}(o.proj,Math.PI/4,l,.1,10),o}recordCommands(t,r){this.#t.clear(c),this.#r.use(),this.#t.bindVertexArray(this.#e);const e=this.#s(t,r);this.#t.uniformMatrix4fv(this.#o,!1,e.model),this.#t.uniformMatrix4fv(this.#n,!1,e.view),this.#t.uniformMatrix4fv(this.#i,!1,e.proj),this.#t.drawIndexed(d.length,1)}}const m=document.getElementById("canvas"),w=new class{#t;constructor(t){this.#t=t}#l(t,r){const e=this.#t.createShader(r);if(!e)throw new Error("Failed to create shader");if(this.#t.shaderSource(e,t),this.#t.compileShader(e),!this.#t.getShaderParameter(e,this.#t.COMPILE_STATUS)){const t=this.#t.getShaderInfoLog(e);throw this.#t.deleteShader(e),new Error("Failed to compile shader: "+t)}return e}createProgram(t,r){const e=this.#l(t,this.#t.VERTEX_SHADER),o=this.#l(r,this.#t.FRAGMENT_SHADER),n=this.#t.createProgram();if(this.#t.attachShader(n,e),this.#t.attachShader(n,o),this.#t.linkProgram(n),!this.#t.getProgramParameter(n,this.#t.LINK_STATUS)){const t=this.#t.getProgramInfoLog(n);throw this.#t.deleteProgram(n),new Error("Failed to link program: "+t)}return n}useProgram(t){this.#t.useProgram(t)}createVertexArray(){return this.#t.createVertexArray()}bindVertexArray(t){this.#t.bindVertexArray(t)}createBuffer(){return this.#t.createBuffer()}bindBuffer(t,r){this.#t.bindBuffer(t,r)}bufferData(t,r,e){this.#t.bufferData(t,r,e)}enableVertexAttribArray(t){this.#t.enableVertexAttribArray(t)}vertexAttribPointer(t,r,e,o,n,i){this.#t.vertexAttribPointer(t,r,e,o,n,i)}uniformMatrix4fv(t,r,e){this.#t.uniformMatrix4fv(t,r,e)}getUniformLocation(t,r){return this.#t.getUniformLocation(t,r)}clear(t){this.#t.clearColor(t.r,t.g,t.b,t.a),this.#t.clear(this.#t.COLOR_BUFFER_BIT)}draw(t,r){this.#t.drawArraysInstanced(this.#t.TRIANGLES,0,t,r)}drawElements(t){this.#t.drawElements(this.#t.TRIANGLES,t,this.#t.UNSIGNED_SHORT,0)}drawIndexed(t,r){this.#t.drawElementsInstanced(this.#t.TRIANGLE_STRIP,t,this.#t.UNSIGNED_SHORT,0,r)}enableDepthTest(){this.#t.enable(this.#t.DEPTH_TEST)}disableDepthTest(){this.#t.disable(this.#t.DEPTH_TEST)}depthFunc(t){this.#t.depthFunc(t)}clearDepth(t){this.#t.clearDepth(t)}}(m.getContext("webgl2")),A=new class{#h;constructor(t){this.#h=new f(t)}render(t,r){this.#h.recordCommands(t,r)}}(w);!function t(){A.render(m.width,m.height),requestAnimationFrame(t)}()})();